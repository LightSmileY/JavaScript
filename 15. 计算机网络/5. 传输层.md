# 传输层

### 概述

- **进程与进程的通信**
- **使用端口（port）来标记不同的网络进程**
- **端口（port）使用16比特位表示（0~65535）**

<br/>



### UDP 

（User Datagram Protocol：用户数据包协议）

![](http://cdn.fengblog.xyz/cs1.png)

| 16位源端口号 | 16位目的端口号 |
| :----------: | :------------: |
| 16位UDP长度  | 16位UDP校验和  |
|   UDP数据     |   UDP数据     |

#### 特点

- **是无连接协议** （无需连接）
- **不能保证可靠地交付数据** （数据丢失也不知道）
- **面向报文传输**（不会对报文进行任何处理，直接塞进UDP数据报）
- **没有拥塞控制** （不管网络是否拥塞，尽量把数据交付出去）
- **首部开销很小** （8个字节）

<br/>



### TCP

（Transmission Control Protocol: 传输控制协议）

![](C:\Users\24347\AppData\Roaming\Typora\typora-user-images\image-20200503104308323.png)

#### 特点

- **面向连接**
- **一个连接有两端（点对点通信）**
- **提供可靠的传输服务**

- **提供全双工的通信**

- **面向字节流**

#### TCP 协议头部

![](http://cdn.fengblog.xyz/tcp01.png)

序号：一个字节一个序号，数据报数据的第一个字节数据的序号

确认号：期望收到数据的首字节序号

数据偏移：占4位：0~15.单位为：32位字。数据偏离首部的位置。

TCP标记：

| 标记 |                      含义                      |
| :--: | :--------------------------------------------: |
| URG  |       Urgent：紧急位，URG=1表示紧急数据        |
| ACK  |   Acknowledgement：确认位，ACK=1确认号才生效   |
| PSH  | Push：推送位。PSH=1，尽快地把数据交付给应用层  |
| RST  |       Reset：重置位，RST=1，重新建立连接       |
| SYN  | Synchrogazation：同步位，SYN=1表示连接请求报文 |
| FIN  |       Finish：终止位，FIN=1表示释放连接        |

窗口：指明允许对方发送的数据量

紧急指针：（URG=1）指定紧急数据在报文的位置

